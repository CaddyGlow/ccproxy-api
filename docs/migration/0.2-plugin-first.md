# Migration Guide: 0.2 Plugin‑First Surface (2025‑09‑02)

This release completes the plugin‑first transition by removing legacy core paths and consolidating around the centralized plugin loader and plugin‑owned endpoints.

Key changes

- Core health endpoints are plugin‑agnostic
  - `/health/live`, `/health/ready`, `/health` no longer report provider/OAuth/SDK status.
  - Provider health lives under plugin health: `GET /plugins/{name}/health`.
- Plugin management API simplified
  - Removed: `POST /plugins/{name}/reload`, `POST /plugins/discover`, `DELETE /plugins/{name}`.
  - Use `GET /plugins` and `GET /plugins/status` for inventory and status.
- Metrics push moved fully to metrics plugin
  - Scheduler no longer references Pushgateway; metrics plugin registers its own task when enabled.
- Storage alias removed from core middleware
  - `app.state.duckdb_storage` is no longer read by core middleware; plugins own storage wiring.
- Config hygiene with fail‑fast validation
  - Legacy keys now error with direct guidance to the plugin namespace.

Configuration updates (examples)

- Scheduler pushgateway → metrics plugin
  - Set under `[plugins.metrics]`:
    - `pushgateway_enabled`, `pushgateway_url`, `pushgateway_job`, `pushgateway_push_interval`
- Storage path → duckdb_storage plugin
  - Set under `[plugins.duckdb_storage]`:
    - `database_path` (optional override)

Recommended actions

- Ensure plugins are enabled and configured under `plugins.*` (TOML or `PLUGINS__...` env vars).
- For metrics Pushgateway, configure under `[plugins.metrics]` and enable the plugin.
- Use `GET /plugins/status` and `GET /plugins/{name}/health` for operational insight.
- Review the README Plugin Config Quickstart for up‑to‑date examples.

Notes

- Dynamic reload/discovery of plugins at runtime is not supported in v2; restart the server to apply plugin changes.
